#!/usr/bin/env bash
mkProfilesDir() {
    echo -ne "Creating firefox directory to store profiles..."
    run mkdir -p "${FIREFOX_REMOTE_PATH}" "${FIREFOX_PROFILES_PATH}"
}

linkProfilesINI() {
    echo -ne "Linking profiles.ini..."
    run ln -sf "${FIREFOX_LOCAL_PATH}/profiles.ini" "${FIREFOX_REMOTE_PATH}"
}

mkProfiles() {
    profileList=$(cat "${FIREFOX_REMOTE_PATH}/profiles.ini" | grep -i 'Name' | cut -d '=' -f 2 | awk '{print tolower($0)}')

    echo -e "Creating profile directories..."
    for profile in ${profileList}; do
        echo -ne "  => Creating profile: ${profile}..."
        run mkdir -p "${FIREFOX_PROFILES_PATH}/${profile}"
    done
}
